<html>

<head>
  <title>prueba</title>
  <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://code.jquery.com/ui/1.12.1/themes/ui-lightness/jquery-ui.css" rel="stylesheet" /> -->
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"> -->

  <link rel="stylesheet" href="/bootstrap-5.2.3.css">
  <link rel="stylesheet" href="/jquery-ui-1.12.css">
  <link rel="stylesheet" href="/registrarventas.min.css" />
  <!-- <script defer src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/utc.js"></script>
  <script defer src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script defer src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script> -->
  <!-- <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script> -->

  <script defer src="/bootstrap-5.2.3.js"></script>
  <script defer src="/dayjs.js"></script>
  <script defer src="/dayjs-plugin-utc.js"></script>
  <script defer src="/jquery-3.6.js"></script>
  <script defer src="/sweetalert-2.11.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <script defer src="/tecladoTabla.js"></script>
  <script defer src="/colocarDatosTablaTests.js"></script>
  <script defer src="/registrarventas.js"></script>
  <script defer src="/dropdown.js"></script>
</head>

<body>
  
  <%- include("layouts/navbar") %>
  <main>
    <div class="contenedor">
      <div class="calendario">
        <span class="columnas"><svg id="diaanterior" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
            <path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z" />
          </svg>
        </span>
        <div class="fecha columnas esconder fechanum"><%=fecha%></div>
        <div class="fecha columnas fechastr"><%=fechastr%></div>
        <span class="columnas">
          <svg id="diasiguiente" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z" /></svg>
        </span>
      </div>
      <article>        
        <div class="grupotabs">
          <div class="tabs">
              <% for (let j=0; j < (ventaspordia?.camiones.length ?? 1); j++){ %>
            <div class="tab">
              <input data-tabid="<%=j%>" type="radio" class="tabs__radio" name="tab" id="tab<%=j%>" <% if (j===0) { %>checked<% } %> />
              <label for="tab<%=j%>" class="tabs__label">Camión <%= (j+1) %></label>
            </div>
            <% } %>
            <span class="agregarcamion"><span class="mas">+</span></span> 
          </div>
          <div class="contenedorsuperior">
            <button class="configuraciones" data-bs-toggle="modal" data-bs-target="#configs"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#ddd" width="30px" height="30px" viewBox="0 0 93.5 93.5" xml:space="preserve"><g><path d="M93.5,40.899c0-2.453-1.995-4.447-4.448-4.447H81.98c-0.74-2.545-1.756-5.001-3.035-7.331l4.998-5    c0.826-0.827,1.303-1.973,1.303-3.146c0-1.19-0.462-2.306-1.303-3.146L75.67,9.555c-1.613-1.615-4.673-1.618-6.29,0l-5,5    c-2.327-1.28-4.786-2.296-7.332-3.037v-7.07C57.048,1.995,55.053,0,52.602,0H40.899c-2.453,0-4.447,1.995-4.447,4.448v7.071    c-2.546,0.741-5.005,1.757-7.333,3.037l-5-5c-1.68-1.679-4.609-1.679-6.288,0L9.555,17.83c-1.734,1.734-1.734,4.555,0,6.289    l4.999,5c-1.279,2.33-2.295,4.788-3.036,7.333h-7.07C1.995,36.452,0,38.447,0,40.899V52.6c0,2.453,1.995,4.447,4.448,4.447h7.071    c0.74,2.545,1.757,5.003,3.036,7.332l-4.998,4.999c-0.827,0.827-1.303,1.974-1.303,3.146c0,1.189,0.462,2.307,1.302,3.146    l8.274,8.273c1.614,1.615,4.674,1.619,6.29,0l5-5c2.328,1.279,4.786,2.297,7.333,3.037v7.071c0,2.453,1.995,4.448,4.447,4.448    h11.702c2.453,0,4.446-1.995,4.446-4.448V81.98c2.546-0.74,5.005-1.756,7.332-3.037l5,5c1.681,1.68,4.608,1.68,6.288,0    l8.275-8.273c1.734-1.734,1.734-4.555,0-6.289l-4.998-5.001c1.279-2.329,2.295-4.787,3.035-7.332h7.071    c2.453,0,4.448-1.995,4.448-4.446V40.899z M62.947,46.75c0,8.932-7.266,16.197-16.197,16.197c-8.931,0-16.197-7.266-16.197-16.197    c0-8.931,7.266-16.197,16.197-16.197C55.682,30.553,62.947,37.819,62.947,46.75z"/></g></svg> Configuraciones</button>
            <button class="btn btn-success botonexcel" id="exportarexcel"><svg xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" viewBox="0 0 32 32"><title>file_type_excel2</title><path d="M28.781,4.405H18.651V2.018L2,4.588V27.115l16.651,2.868V26.445H28.781A1.162,1.162,0,0,0,30,25.349V5.5A1.162,1.162,0,0,0,28.781,4.405Zm.16,21.126H18.617L18.6,23.642h2.487v-2.2H18.581l-.012-1.3h2.518v-2.2H18.55l-.012-1.3h2.549v-2.2H18.53v-1.3h2.557v-2.2H18.53v-1.3h2.557v-2.2H18.53v-2H28.941Z" style="fill:#20744a;fill-rule:evenodd"/><rect x="22.487" y="7.439" width="4.323" height="2.2" style="fill:#20744a"/><rect x="22.487" y="10.94" width="4.323" height="2.2" style="fill:#20744a"/><rect x="22.487" y="14.441" width="4.323" height="2.2" style="fill:#20744a"/><rect x="22.487" y="17.942" width="4.323" height="2.2" style="fill:#20744a"/><rect x="22.487" y="21.443" width="4.323" height="2.2" style="fill:#20744a"/><polygon points="6.347 10.673 8.493 10.55 9.842 14.259 11.436 10.397 13.582 10.274 10.976 15.54 13.582 20.819 11.313 20.666 9.781 16.642 8.248 20.513 6.163 20.329 8.585 15.666 6.347 10.673" style="fill:#fff;fill-rule:evenodd"/></svg> Exportar a Excel</button>
            <button class="btn btn-danger botonpdf" id="exportarpdf"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="30px" width="30px" version="1.1" id="Capa_1" viewBox="0 0 56 56" xml:space="preserve"><g><path style="fill:#E9E9E0;" d="M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074   c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z"/><polygon style="fill:#D9D7CA;" points="37.5,0.151 37.5,12 49.349,12  "/><path style="fill:#CC4B4C;" d="M19.514,33.324L19.514,33.324c-0.348,0-0.682-0.113-0.967-0.326   c-1.041-0.781-1.181-1.65-1.115-2.242c0.182-1.628,2.195-3.332,5.985-5.068c1.504-3.296,2.935-7.357,3.788-10.75   c-0.998-2.172-1.968-4.99-1.261-6.643c0.248-0.579,0.557-1.023,1.134-1.215c0.228-0.076,0.804-0.172,1.016-0.172   c0.504,0,0.947,0.649,1.261,1.049c0.295,0.376,0.964,1.173-0.373,6.802c1.348,2.784,3.258,5.62,5.088,7.562   c1.311-0.237,2.439-0.358,3.358-0.358c1.566,0,2.515,0.365,2.902,1.117c0.32,0.622,0.189,1.349-0.39,2.16   c-0.557,0.779-1.325,1.191-2.22,1.191c-1.216,0-2.632-0.768-4.211-2.285c-2.837,0.593-6.15,1.651-8.828,2.822   c-0.836,1.774-1.637,3.203-2.383,4.251C21.273,32.654,20.389,33.324,19.514,33.324z M22.176,28.198   c-2.137,1.201-3.008,2.188-3.071,2.744c-0.01,0.092-0.037,0.334,0.431,0.692C19.685,31.587,20.555,31.19,22.176,28.198z    M35.813,23.756c0.815,0.627,1.014,0.944,1.547,0.944c0.234,0,0.901-0.01,1.21-0.441c0.149-0.209,0.207-0.343,0.23-0.415   c-0.123-0.065-0.286-0.197-1.175-0.197C37.12,23.648,36.485,23.67,35.813,23.756z M28.343,17.174   c-0.715,2.474-1.659,5.145-2.674,7.564c2.09-0.811,4.362-1.519,6.496-2.02C30.815,21.15,29.466,19.192,28.343,17.174z    M27.736,8.712c-0.098,0.033-1.33,1.757,0.096,3.216C28.781,9.813,27.779,8.698,27.736,8.712z"/><path style="fill:#CC4B4C;" d="M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z"/><g><path style="fill:#FFFFFF;" d="M17.385,53h-1.641V42.924h2.898c0.428,0,0.852,0.068,1.271,0.205    c0.419,0.137,0.795,0.342,1.128,0.615c0.333,0.273,0.602,0.604,0.807,0.991s0.308,0.822,0.308,1.306    c0,0.511-0.087,0.973-0.26,1.388c-0.173,0.415-0.415,0.764-0.725,1.046c-0.31,0.282-0.684,0.501-1.121,0.656    s-0.921,0.232-1.449,0.232h-1.217V53z M17.385,44.168v3.992h1.504c0.2,0,0.398-0.034,0.595-0.103    c0.196-0.068,0.376-0.18,0.54-0.335c0.164-0.155,0.296-0.371,0.396-0.649c0.1-0.278,0.15-0.622,0.15-1.032    c0-0.164-0.023-0.354-0.068-0.567c-0.046-0.214-0.139-0.419-0.28-0.615c-0.142-0.196-0.34-0.36-0.595-0.492    c-0.255-0.132-0.593-0.198-1.012-0.198H17.385z"/><path style="fill:#FFFFFF;" d="M32.219,47.682c0,0.829-0.089,1.538-0.267,2.126s-0.403,1.08-0.677,1.477s-0.581,0.709-0.923,0.937    s-0.672,0.398-0.991,0.513c-0.319,0.114-0.611,0.187-0.875,0.219C28.222,52.984,28.026,53,27.898,53h-3.814V42.924h3.035    c0.848,0,1.593,0.135,2.235,0.403s1.176,0.627,1.6,1.073s0.74,0.955,0.95,1.524C32.114,46.494,32.219,47.08,32.219,47.682z     M27.352,51.797c1.112,0,1.914-0.355,2.406-1.066s0.738-1.741,0.738-3.09c0-0.419-0.05-0.834-0.15-1.244    c-0.101-0.41-0.294-0.781-0.581-1.114s-0.677-0.602-1.169-0.807s-1.13-0.308-1.914-0.308h-0.957v7.629H27.352z"/><path style="fill:#FFFFFF;" d="M36.266,44.168v3.172h4.211v1.121h-4.211V53h-1.668V42.924H40.9v1.244H36.266z"/></g></g></svg> Exportar a PDF</button>
            <div class="contenedorrestaurar restaurarsoloestatabla restaurarplantilla">
              <div class="centrar">
                <svg class="svgrestaurar" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M32.5 224H24c-13.3 0-24-10.7-24-24V72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L82.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L169 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8H32.5z"/></svg>
                <span>Restaurar orden de la plantilla</span>
              </div>
            </div> 
            <div class="dropdown" id="selector">
              <div class="select">
                <span class="selected">Selecciona una plantilla aquí (opcional)</span>
                <div class="caret"></div>
              </div>
            <ul class="menu">
              <% plantillas.forEach(function(plantilla){ %>
                <li><%= plantilla.nombreplantilla %></li>
                <% }); %>
            </ul></div>
            <script>
              let plantillaDefault = "<%= plantillas[0].nombreplantilla %>";
            </script>
            <input type="button" value="Añadir producto" id="añadirProducto" class=" añadirproductoyviaje" />
            <input type="button" value="Añadir viaje" id="añadirViaje" class="añadirproductoyviaje" />
        </div>
            <div class="contenidotabs">
              <% for (let j=0; j < (ventaspordia?.camiones.length ?? 1); j++){ %>
              <div data-tabid="<%=j%>" class="tabs__content">
                  <div class="contenedor-trabajador">
                    <label class="label-trabajador">Nombre del trabajador:</label>
                    <div class="contenedor-input-trabajador">
                      <input type="text" class="form-control trabajador" data-trab="<%=j%>"
                      <% if (ventaspordia) { %> value= <%= ventaspordia.camiones[0].nombretrabajador %> <% } %>/>
                      <div class="btn-group dropend">
                        <button type="button" class="btn btn-sm btn-secondary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown">
                          <span class="visually-hidden">Toggle Dropdown</span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-dark">
                          <li class="dropdown-item">Action</li>
                          <li class="dropdown-item">Another action</li>
                        </ul>
                      </div>
                    </div>
                  </div>
                    <%- include("layouts/tablacompleta", {j, ventaspordia, plantillaDefault}) %>
              </div>
              <% } %>
            </div>
            <% if (ventaspordia) { %>
              <span class="ultima-modificacion">Fecha de última modificación: <span class="ultima-modificacion-fecha"><%=DateTime.fromJSDate(ventaspordia.fechaultimocambio, {zone: "America/Guatemala"}).toFormat("d/M/y")%></span><span> a las <%= DateTime.fromJSDate(ventaspordia.fechaultimocambio, {zone: "America/Guatemala"}).toFormat("H:mm 'con' ss 'segundos'") %></span></span>
            <% } %>
        </div>
      </article>
      <div class="contenedorinferior">
        <input class="btn btn-primary añadirproductoyviaje" type="button" value="Guardar" id="guardar">
        <%# 
        <div class="contenedorrestaurar restaurarsoloestatabla">
          <div class="centrar">
            <svg class="svgrestaurar" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M32.5 224H24c-13.3 0-24-10.7-24-24V72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L82.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L169 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8H32.5z"/></svg>
            <span>Deshacer última acción</span>
          </div>
        </div>  
        <div class="contenedorrestaurar restaurarsoloestatabla">
          <div class="centrar">
            <svg class="svgrestaurar svgrotado" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M32.5 224H24c-13.3 0-24-10.7-24-24V72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L82.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L169 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8H32.5z"/></svg>
            <span>Rehacer última acción</span>
          </div>
        </div> 
         %>
        <input class="btn btn-primary añadirproductoyviaje resumen" type="button" value="Ver resumen del día" id="resumen"> 
      </div>    
    </main>



    <div class="modal fade" id="configs" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="staticBackdropLabel">Configuraciones</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <article>
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="switchreordenalfabetico" checked>
                <label class="form-check-label" for="switchreordenalfabetico">Agregar ícono para ordenar por orden alfabético</label>
              </div>
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="switchreordenarproductos">
                <label class="form-check-label" for="switchreordenarproductos">Cambiar el orden de los productos de las tablas</label>
              </div>
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="switchreordenarcamiones">
                <label class="form-check-label" for="switchreordenarcamiones">Cambiar el orden de los camiones</label>
              </div>
            </article>
            <article>
              <div class="titulosecundarioconfiguraciones">¿Cómo prefiere borrar los camiones?</div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="borrarcamiones" id="camionespresionar1segundo">
                <label class="form-check-label" for="camionespresionar1segundo">Presionando la pestaña por 1 segundo</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="borrarcamiones" id="camionespresionarx" checked>
                <label class="form-check-label" for="camionespresionarx">Presionando un botón con una X</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="borrarcamiones" id="camionesdesactivar">
                <label class="form-check-label" for="camionesdesactivar">Desactivar</label>
              </div>
            </article>
            <article>
              <div class="titulosecundarioconfiguraciones">¿Cómo prefiere borrar filas y columnas en las tablas?</div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="borrarfilasycolumnas" id="filasycolumnaspresionar1segundo" >
                <label class="form-check-label" for="filasycolumnaspresionar1segundo">Presionando una celda por 1 segundo</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="borrarfilasycolumnas" id="filasycolumnaspresionarx" checked>
                <label class="form-check-label" for="filasycolumnaspresionarx">Presionando un botón con una X</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="borrarfilasycolumnas" id="filasycolumnasdesactivar">
                <label class="form-check-label" for="filasycolumnasdesactivar">Desactivar</label>
              </div>
            </article>
            <article>
              <div class="titulosecundarioconfiguraciones">¿Cuál desesa que sea el comportamiento por defecto del botón exportar a PDF?</div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="exportarpdf" id="exportarpdfactual" >
                <label class="form-check-label" for="exportarpdfactual">Exportar solo la tabla actual</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="exportarpdf" id="exportarpdftodo" checked>
                <label class="form-check-label" for="exportarpdftodo">Exportar todas las tablas</label>
              </div>
            </article>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary btn-config guardarconfig" data-bs-dismiss="modal">Guardar cambios</button>
            <button type="button" class="btn btn-danger btn-config cerrarconfig" data-bs-dismiss="modal">Cerrar</button>
          </div>
        </div>
      </div>
    </div>
</body>
</html>